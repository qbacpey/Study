A small but important detail occurs when the hardware takes an exception to emulate an instruction in the kernel, e.g., for missing floating point hardware. If the handler returns back to the instruction that caused the exception, another exception would instantly recur! To prevent an infinite loop, the exception handler modifies the program counter stored at the base on the stack to point to the instruction immediately after the one causing the mode switch. The iret instruction can then return to the user process at the correct location. 
<P></P>
<P>For a system call trap, the Intel x86 hardware does the increment when it saves the user-level state. The program counter for the instruction after the trap is saved on the kernel&#8217;s interrupt stack.</P>
<P><SPAN class=extract>&#20026;&#20102;&#19981;&#24341;&#21457;&#27515;&#24490;&#29615;&#65288;&#22914;&#31995;&#32479;&#35843;&#29992;&#65289;&#65292;&#26377;&#26102;&#38656;&#35201;&#36882;&#22686; PC&#65288;&#32780;&#19981;&#26159;&#24674;&#22797;&#21407;&#20540;&#65289;</SPAN></P>
<P><SPAN class=extract>x86 &#20250;&#22312;&#20445;&#23384;&#29992;&#25143;&#36827;&#31243;&#29366;&#24577;&#30340;&#26102;&#20505;&#23558; PC &#20445;&#23384;&#21040;&#20869;&#26680;&#20013;&#26029;&#26632;&#20013;</SPAN>