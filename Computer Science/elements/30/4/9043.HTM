<H1 class=post-title style="BOX-SIZING: border-box; FONT-FAMILY: Inter, Verdana, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 500; COLOR: rgb(0,0,0); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 27px; LETTER-SPACING: normal; LINE-HEIGHT: 1.25; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial"><SPAN class=headers>Title:</SPAN></B><SPAN class=RefText> How Anycast Works to Bring Content Closer to Your Visitors</SPAN></H1>
<P>When you type www.someplace.com into the address bar of your browser and press enter, the site is displayed in your browser in (hopefully) a few seconds. There are a number of things happening behind the scenes to route your request to that site so you can view the content.<SPAN>&nbsp;</SPAN><A href="https://www.imperva.com/blog/bgp-routing-explained/" rel="nofollow noopener" target=_blank>Border gateway protocol</A><SPAN>&nbsp;</SPAN>(BGP) ensures that your request arrives at the server for that site via the best route through the internet.</P>
<P>There are a few methodologies to address the target server, and in this post we will discuss one of them, anycast addressing, in detail.</P>
<H2>What is Anycast?</H2>
<P>In<SPAN>&nbsp;</SPAN><A href="https://www.imperva.com/learn/performance/anycast/">anycast</A>, a collection of servers share the same IP address and send data from a source computer to the server that is topographically the closest. This helps cut down on latency and bandwidth costs, improves load time for users, and improves availability. It is important to remember that topographically closer does not inherently mean geographically closer, though this is often the case.</P>
<P>Anycast is linked with the BGP protocol which ensures that all of a router&#8217;s neighbors are aware of the networks that can be reached through that router and the topographical distance to those networks. The main principle of anycast is that an IP address range is advertised in the BGP messages of multiple routers. As this propagates across the Internet, routers become aware of which of their neighbors provides the shortest topographical path to the advertised IP address.</P>
<H2>Addressing Methods</H2>
<P>These other primary addressing methods are available to route traffic.</P>
<UL>
<LI><STRONG>Unicast&nbsp;</STRONG><STRONG>addressing</STRONG>&nbsp;uses a&nbsp;<EM>one-to-one</EM>&nbsp;association, where each destination address is uniquely identified as a single receiver endpoint. Traditional DNS deployments are configured with unicast addresses.<img class="aligncenter wp-image-5582 size-full lazyloaded" src="https://www.imperva.com/blog/wp-content/uploads/sites/9/2017/02/anycast-1.png" width=273 height=92 data-wp-pid="5582" data-src="/blog/wp-content/uploads/sites/9/2017/02/anycast-1.png" loading="lazy"> 
<LI><STRONG>Multicast&nbsp;addressing</STRONG>&nbsp;uses a&nbsp;<EM>one-to-unique many&nbsp;</EM>association, where datagrams are routed from a single sender to multiple selected endpoints in a single transmission, using a multicast group address. A common use of multicast is streaming audio, where the audio is published via multicast addressing and clients pick up the routed stream as a channel.<img class="aligncenter wp-image-5583 size-full lazyloaded" src="https://www.imperva.com/blog/wp-content/uploads/sites/9/2017/02/anycast-2.png" width=262 height=108 data-wp-pid="5583" data-src="/blog/wp-content/uploads/sites/9/2017/02/anycast-2.png" loading="lazy"> 
<LI><STRONG>Broadcast&nbsp;addressing</STRONG>&nbsp;uses a&nbsp;<EM>one-to-many&nbsp;</EM>association, where datagrams are routed from a single sender to all other connected endpoints in a single transmission, using a broadcast address. The network automatically replicates datagrams as needed for all network segments (links) that contain an eligible receiver.<img class="aligncenter wp-image-5584 size-full lazyloaded" src="https://www.imperva.com/blog/wp-content/uploads/sites/9/2017/02/anycast-3.png" width=242 height=117 data-wp-pid="5584" data-src="/blog/wp-content/uploads/sites/9/2017/02/anycast-3.png" loading="lazy"></LI></UL>
<H2>DNS Anycast</H2>
<P>With Unicast,<SPAN>&nbsp;</SPAN><A href="https://www.imperva.com/blog/dns-humans-making-sense-domain-name-system/" rel=noopener target=_blank>DNS</A><SPAN>&nbsp;</SPAN>client resolvers can be configured with multiple DNS name server targets. In the event the resolver doesn&#8217;t receive any response from the first server on the list, it will typically wait a time out value, before it switches to the second server (and subsequent servers) in the resolver list. The next time the resolver has to perform a look up, it won&#8217;t &#8220;remember&#8221; servers in the list were non-responsive, and it will start querying with the first server in the list even though it is still unavailable.&nbsp; Depending on the operating system of the client, it could be one to five seconds as it rotates through the resolver list each time, attempting&nbsp;the failed server.</P>
<P>DNS client resolvers configured with anycast addresses virtually eliminate this latency, since the resolution is handled by the routing protocol. In the diagram below a single DNS client workstation, configured with the anycast DNS IP address of 123.10.10.10,&nbsp;is shown performing DNS resolution against its closest of three DNS name servers deployed using the same anycast IP address.</P>
<P><img class="aligncenter wp-image-5603 size-full lazyloaded" src="https://www.imperva.com/blog/wp-content/uploads/sites/9/2017/02/anycast-4.jpg" width=781 height=338 data-wp-pid="5603" data-src="/blog/wp-content/uploads/sites/9/2017/02/anycast-4.jpg" loading="lazy"></P>
<P>&nbsp;</P>
<P>The client&#8217;s DNS resolver can resolve against any one of the three DNS servers shown above. Layer 3 routing&nbsp;would send our DNS client&#8217;s packets through router R1 due to the routing topology.&nbsp; Should router R1 or&nbsp;Server A fail, our DNS client&#8217;s packets would automatically be rerouted to the next nearest DNS server via routers R2 and R3.&nbsp; Additionally, the route to our server A, would be removed from the routing tables, thus preventing further use of that name server.&nbsp; Server A won&#8217;t be used until it is restored and the IP anycast address routes reinjected to the network.</P>
<P>Let&#8217;s draw an analogy from everyday life to make all of this a bit more understandable.</P>
<P>Imagine the shoes you&#8217;ve wanted are on sale and are available at all branches of a department store chain. Just like in anycast, you can be serviced at many identical sites, with no reason to prefer any specific site. So you enter &#8220;Marks and Spencer&#8221; into Waze, and the navigator will take you the nearest available branch to purchase those shoes. If the road to the nearest branch is blocked, Waze will take you to the next nearest branch.</P>
<H2>Why Anycast?</H2>
<P>The question, you might be asking, is why use anycast routing instead of the simpler unicast routing, which will get your request to that same IP address.</P>
<P>Unicast routing is certainly adequate and appropriate for a site with a single web server to accommodate a moderate amount of traffic. Imagine you are sitting with your computer at a caf&#233; on the Canal Grande and accessing www.venicegazette.com, which has 843 hits an hour. That site will have one web server and your request will quickly be routed to that Unicast address.</P>
<P>However it will not be so simple when you next access www.dailyplanet.com to read Lois Lane&#8217;s latest article. Since that paper has millions of subscribers, there are multiple web servers each with the same IP address, dispersed geographically, to serve requests.</P>
<P><img class="aligncenter wp-image-5602 size-full lazyloaded" src="https://www.imperva.com/blog/wp-content/uploads/sites/9/2017/02/anycast-5.jpg" width=780 height=351 data-wp-pid="5602" data-src="/blog/wp-content/uploads/sites/9/2017/02/anycast-5.jpg" loading="lazy"></P>
<P>The advantages of anycast in such a scenario are:</P>
<UL>
<LI><STRONG>Performance improvement</STRONG><SPAN>&nbsp;</SPAN>&#8212; Traffic is routed with negligible latency to the user as discussed above 
<LI><STRONG>Service reliability</STRONG><SPAN>&nbsp;</SPAN>&#8211; With redundant servers, the service is more highly available. For example, if the Paris server is under maintenance, service will automatically be routed to an available server with the next best route.<img class="aligncenter wp-image-5601 size-full lazyloaded" src="https://www.imperva.com/blog/wp-content/uploads/sites/9/2017/02/anycast-6.jpg" width=778 height=349 data-wp-pid="5601" data-src="/blog/wp-content/uploads/sites/9/2017/02/anycast-6.jpg" loading="lazy"> 
<LI><STRONG>Load balancing</STRONG><SPAN>&nbsp;</SPAN>&#8211; Routing to multiple servers will effectively balance load among the servers, improving site speed 
<LI><STRONG>Reduces impact of DoS attacks</STRONG><SPAN>&nbsp;</SPAN>&#8211; The denial of service attack will likely be localized to a server and therefore not impact the entire service</LI></UL>