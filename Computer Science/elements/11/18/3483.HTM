<FONT style="BACKGROUND-COLOR: #7be1e1">
<H1 class="title-2 xs-mb-30" style="FONT-FAMILY: gt-bold; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 600; COLOR: rgb(0,0,0); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 30px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 1.28; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; text-size-adjust: 100%; -webkit-font-smoothing: antialiased; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial"><SPAN class=headers>Title:</SPAN></B><SPAN class=RefText> Overview of VLAN Trunking and Encapsulation</SPAN></H1><A href="https://www.section.io/engineering-education/vlan-trunking/"><SPAN class=headers>Source:</SPAN></B><SPAN class=RefText> https://www.section.io/engineering-education/vlan-trunking/</SPAN></FONT></A> 
<H1 class="title-2 xs-mb-30" style="FONT-FAMILY: gt-bold; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 600; COLOR: rgb(0,0,0); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 30px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 1.28; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; text-size-adjust: 100%; -webkit-font-smoothing: antialiased; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial"><SPAN class=RefText></SPAN></FONT>&nbsp;</H1></FONT>
<P><STRONG><FONT style="BACKGROUND-COLOR: #7be1e1">A<SPAN>&nbsp;</SPAN></FONT><A href="https://en.wikipedia.org/wiki/Virtual_LAN"><FONT style="BACKGROUND-COLOR: #7be1e1">virtual LAN (VLAN)</FONT></A><FONT style="BACKGROUND-COLOR: #7be1e1"><SPAN>&nbsp;</SPAN>is any broadcast domain that is partitioned and isolated in a computer network at the data link layer (OSI Layer 2).</FONT></STRONG><FONT style="BACKGROUND-COLOR: #7be1e1"><SPAN>&nbsp;</SPAN>LAN stands for Local Area Network and virtual, in the name, upholds the concept of separating broadcast domains of networks logically.<SPAN>&nbsp;</SPAN><EM>A broadcast domain is a network that is logically divided such that all nodes in the network can reach each other by broadcast at the data link layer</EM>.<SPAN>&nbsp;</SPAN><EM>VLANs function by tagging every frame with a VLAN tag and designing the network such that it takes these tags into account while performing routing and forwarding.</EM><SPAN>&nbsp;</SPAN>By assigning tags to frames one can create the appearance and functionality of a computer network that is physically on a single network but acts as if it is split between separate networks. In simple terms, VLAN segregates traffic within a network.</FONT></P>
<H3 id=what-is-vlan-trunking><FONT style="BACKGROUND-COLOR: #7be1e1">What is VLAN trunking?</FONT></H3>
<P><FONT style="BACKGROUND-COLOR: #7be1e1">There are two ways of categorizing VLAN enabled ports on network devices:</FONT></P>
<UL>
<LI><FONT style="BACKGROUND-COLOR: #7be1e1">Untagged or Native ports</FONT> 
<LI><FONT style="BACKGROUND-COLOR: #7be1e1">Tagged or Trunk ports</FONT></LI></UL>
<P><EM><FONT style="BACKGROUND-COLOR: #7be1e1">A network port is a communication endpoint a device uses to send and receive traffic.</FONT></EM></P>
<P><FONT style="BACKGROUND-COLOR: #7be1e1"><STRONG>Native ports accept traffic from a single VLAN and are used to link end devices like routers, servers, terminals etc.</STRONG><SPAN>&nbsp;</SPAN>They do not need to accommodate an additional identification tag as they are involved in exchanging traffic with a single end device. Hence the name,<SPAN>&nbsp;</SPAN><STRONG>untagged ports</STRONG>. They are also referred to as<SPAN>&nbsp;</SPAN><STRONG>access ports.</STRONG><SPAN>&nbsp;</SPAN><STRONG>Trunk ports are used to pass traffic from multiple VLANs and are used to link switches.</STRONG><SPAN>&nbsp;</SPAN>In order to distinguish between frames from different VLANs, trunk ports add identification tags to the frames. Hence the name,<SPAN>&nbsp;</SPAN><STRONG>tagged ports.</STRONG><SPAN>&nbsp;</SPAN><STRONG>A trunk is a point-to-point link between two network devices that carry more than one VLAN.</STRONG></FONT></P>
<P><FONT style="BACKGROUND-COLOR: #7be1e1"><img alt=native-vs-trunk src="https://www.section.io/engineering-education/vlan-trunking/native-vs-trunk.jpg"></FONT></P>
<P><FONT style="BACKGROUND-COLOR: #7be1e1">In the diagram above, devices 1 and 2 have established Native VLANs with Switch 1. Similarly, devices 3 and 4 have Native VLANs established with Switch 2. Note that native VLANs transport untagged frames. However, when these untagged frames reach a trunk end, they need to be tagged to make sure the switch on the other side of the trunk can forward the frames to the right destinations. As a result, the switches with trunk ports add tags to the frames for identification - a process typically known as VLAN Encapsulation. Switch 1 tags all frames it receives from device 1 with VLAN ID 1 because device 1 belongs to VLAN 1, before forwarding the frames on the trunk. Similarly, it tags all frames from device 2 with VLAN ID 2. Switch 2, on receiving the tagged frames, decapsulates them to check which VLAN they are destined for and forwards them accordingly. Traffic on VLAN 1 will not be seen by devices in VLAN2 because Layer 2 unicast, multicast and broadcast traffic will not cross VLAN boundaries.</FONT></P>
<H3 id=what-is-vlan-encapsulation><FONT style="BACKGROUND-COLOR: #7be1e1">What is VLAN encapsulation?</FONT></H3>
<P><FONT style="BACKGROUND-COLOR: #7be1e1">When a switch port is configured to function as a trunk port, it adds unique identification tags &#8211; either 802.1Q tags or Inter-Switch Link (ISL) tags to the frames as they move between switches.</FONT></P>
<P><STRONG><FONT style="BACKGROUND-COLOR: #7be1e1">IEEE</FONT><A href="https://en.wikipedia.org/wiki/IEEE_802.1Q"><FONT style="BACKGROUND-COLOR: #7be1e1">802.1Q</FONT></A><FONT style="BACKGROUND-COLOR: #7be1e1">, often referred to as DOT1Q or 1Q, is the networking standard that supports virtual LANs (VLANs) on an IEEE 802.3 Ethernet network. It is the most widely used encapsulation method for VLAN tagging.</FONT></STRONG></P>
<P><EM><FONT style="BACKGROUND-COLOR: #7be1e1">Note:<SPAN>&nbsp;</SPAN></FONT><A href="https://en.wikipedia.org/wiki/IEEE_802.3"><FONT style="BACKGROUND-COLOR: #7be1e1">IEEE 802.3</FONT></A><FONT style="BACKGROUND-COLOR: #7be1e1"><SPAN>&nbsp;</SPAN>is a standard that specifies the characteristics of physical layer and Media Access Control(MAC) layer for wired Ethernet connections, generally called LANs. It is also referred to as the Ethernet standard.</FONT></EM></P>
<P><FONT style="BACKGROUND-COLOR: #7be1e1"><img alt=dot1q-frame-format src="https://www.section.io/engineering-education/vlan-trunking/dot1q.jpg"></FONT></P>
<P><FONT style="BACKGROUND-COLOR: #7be1e1">The dot1Q frame standard accommodates a VLAN tag in the original Ethernet frame. This VLAN tag is 4 bytes long and consists of the fields discussed below:</FONT></P>
<OL>
<LI><FONT style="BACKGROUND-COLOR: #7be1e1"><STRONG>Tag Protocol ID(TPID)</STRONG>: This field is used to identify the frame as IEEE 802.1q frame. The value is set to 0x8100.</FONT> 
<LI><FONT style="BACKGROUND-COLOR: #7be1e1"><STRONG>Priority(PRI)</STRONG>: This field indicates frame priority level. Also called Priority Code Point(PCP). See<SPAN>&nbsp;</SPAN></FONT><A href="https://en.wikipedia.org/wiki/IEEE_P802.1p#Priority_levels"><FONT style="BACKGROUND-COLOR: #7be1e1">this</FONT></A><FONT style="BACKGROUND-COLOR: #7be1e1"><SPAN>&nbsp;</SPAN>link for priority levels.</FONT> 
<LI><FONT style="BACKGROUND-COLOR: #7be1e1"><STRONG>Canonical Format Indicator(CFI)</STRONG>: Now known as Drop Eligibility Indicator(DEI), this field along with PCP is used to indicate frames that can be dropped during congestion.</FONT> 
<LI><FONT style="BACKGROUND-COLOR: #7be1e1"><STRONG>VLAN ID</STRONG>: This ID is unique for each VLAN and helps in identifying which VLAN the current frame belongs to. This field is 12 bits long. Hence, 1dotQ supports 2^12 i.e. 4096 unique VLANs on a single Ethernet network.</FONT></LI></OL>
<P><FONT style="BACKGROUND-COLOR: #7be1e1"><EM>As 802.1q encapsulation inserts an additional field into the Ethernet frame, Frame Check Sequence(FCS) is recalculated.</EM><SPAN>&nbsp;</SPAN><EM>All switches support 802.1q encapsulation.</EM></FONT></P>
<P><FONT style="BACKGROUND-COLOR: #7be1e1"><EM>VLAN implementations have shown an increase in the performance, scalability and security of the entire network.</EM><SPAN>&nbsp;</SPAN>There are several reasons for using VLANs in networks, but the most prominent one is<SPAN>&nbsp;</SPAN><STRONG>traffic management</STRONG>. As long as a Local Area Network branches out and proliferates with more and more end devices and network devices, the frequency of broadcast increases accordingly. The chances of the network getting heavily congested with data increases simultaneously. As stated before, VLANs separate network segments and limit broadcast traffic. In order for two subnets separated by VLANs to communicate, a Layer 3 device is required. Even if two ports of a device belonging to different VLANs wish to communicate, they need to be mediated by a Layer 3 routing device. Their traffic will essentially be segregated too. VLANs must, therefore, be used strategically in networks to avoid looping, overload and redundant usage of Layer 3 network devices.</FONT>