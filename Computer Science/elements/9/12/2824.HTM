<CODE><FONT face="Courier New"><SPAN class=extract><CODE><FONT face="Courier New"><SPAN class=headers>Title:</SPAN></B><SPAN class=RefText> What are the uses of the exec command in shell scripts?</SPAN></FONT></FONT></CODE></SPAN></FONT></CODE> 
<P></P>
<P><CODE><FONT face="Courier New"><SPAN class=extract><CODE><FONT face="Courier New">exec</FONT></CODE><SPAN>&nbsp;</SPAN>replaces the current program in the current process, without<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">fork</FONT></CODE>ing a new process</SPAN></FONT></CODE>. It is not something you would use in every script you write, but it comes in handy on occasion. Here are some scenarios I have used it;</P>
<OL>
<LI><SPAN class=extract>
<P>We want the user to run a specific application program without access to the shell. We could change the sign-in program in /etc/passwd, but maybe we want environment setting to be used from start-up files. So, in (say)<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">.profile</FONT></CODE>, the last statement says something like:</P><PRE class="lang-sh s-code-block"><CODE class="hljs language-bash"><FONT face="Courier New"> <SPAN class=hljs-built_in>exec</SPAN> appln-program
</FONT></CODE></PRE>
<P>so now there is no shell to go back to. Even if<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">appln-program</FONT></CODE><SPAN>&nbsp;</SPAN>crashes, the end-user cannot get to a shell, because it is not there - the<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">exec</FONT></CODE><SPAN>&nbsp;</SPAN>replaced it</P>
<P></SPAN>.</P>
<LI>
<P>We want to use a different shell to the one in /etc/passwd. Stupid as it may seem, some sites do not allow users to alter their sign-in shell. One site I know had everyone start with<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">csh</FONT></CODE>, and everyone just put into their<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">.login</FONT></CODE><SPAN>&nbsp;</SPAN>(csh start-up file) a call to<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">ksh</FONT></CODE>. While that worked, it left a stray<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">csh</FONT></CODE><SPAN>&nbsp;</SPAN>process running, and the logout was two stage which could get confusing. So we changed it to<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">exec ksh</FONT></CODE><SPAN>&nbsp;</SPAN>which just replaced the c-shell program with the korn shell, and made everything simpler (there are other issues with this, such as the fact that the<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">ksh</FONT></CODE><SPAN>&nbsp;</SPAN>is not a login-shell).</P>
<LI>
<P><SPAN class=extract>Just to save processes. If we call<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">prog1 -&gt; prog2 -&gt; prog3 -&gt; prog4</FONT></CODE><SPAN>&nbsp;</SPAN>etc. and never go back, then make each call an exec. It saves resources (not much, admittedly, unless repeated) and makes shutdown simplier</SPAN>.</P></LI></OL>
<P>You have obviously seen<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">exec</FONT></CODE><SPAN>&nbsp;</SPAN>used somewhere, perhaps if you showed the code that's bugging you we could justify its use.</P><STRONG><SPAN class=extract>
<P><STRONG>Edit</STRONG>: I realised that my answer above is incomplete. There are<SPAN>&nbsp;</SPAN><STRONG>two</STRONG><SPAN>&nbsp;</SPAN>uses of<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">exec</FONT></CODE><SPAN>&nbsp;</SPAN>in shells like<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">ksh</FONT></CODE><SPAN>&nbsp;</SPAN>and<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">bash</FONT></CODE><SPAN>&nbsp;</SPAN>- used for opening file descriptors. Here are some examples:<BR><CODE class="hljs language-bash"><FONT face="Courier New"><FONT size=2><SPAN class=hljs-built_in>exec</SPAN> 3&lt; thisfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN class=hljs-comment># open "thisfile" for reading on file descriptor 3</SPAN><BR><SPAN class=hljs-built_in>exec</SPAN> 4&gt; thatfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN class=hljs-comment># open "thatfile" for writing on file descriptor 4</SPAN><BR><SPAN class=hljs-built_in>exec</SPAN> 8&lt;&gt; tother&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN class=hljs-comment># open "tother" for reading and writing on fd 8</SPAN><BR><SPAN class=hljs-built_in>exec</SPAN> 6&gt;&gt; other&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN class=hljs-comment># open "other" for appending on file descriptor 6</SPAN><BR><SPAN class=hljs-built_in>exec</SPAN> 5&lt;&amp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN class=hljs-comment># copy read file descriptor 0 onto file descriptor 5</SPAN><BR><SPAN class=hljs-built_in>exec</SPAN> 7&gt;&amp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN class=hljs-comment># copy write file descriptor 4 onto 7</SPAN><BR><SPAN class=hljs-built_in>exec</SPAN> 3&lt;&amp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN class=hljs-comment># close the read file descriptor 3</SPAN><BR><SPAN class=hljs-built_in>exec</SPAN> 6&gt;&amp;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN class=hljs-comment># close the write file descriptor 6</SPAN></FONT></FONT></CODE></P>
<P>Note that spacing is very important here. If you place a space between the fd number and the redirection symbol then<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">exec</FONT></CODE><SPAN>&nbsp;</SPAN>reverts to the original meaning:</P><PRE class="lang-sh s-code-block"><CODE class="hljs language-bash"><FONT face="Courier New">  <FONT size=2><SPAN class=hljs-built_in>exec</SPAN> 3 &lt; thisfile       <SPAN class=hljs-comment># oops, overwrite the current program with command "3"</SPAN></FONT>
</FONT></CODE></PRE>
<P>There are several ways you can use these, on ksh use<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">read -u</FONT></CODE><SPAN>&nbsp;</SPAN>or<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">print -u</FONT></CODE>, on<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">bash</FONT></CODE>, for example:</P><PRE class="lang-sh s-code-block"><CODE class="hljs language-bash"><FONT face="Courier New"><SPAN class=hljs-built_in>read</SPAN> &lt;&amp;3
<SPAN class=hljs-built_in>echo</SPAN> stuff &gt;&amp;4</FONT></CODE></PRE>
<P></SPAN></STRONG>