Each of these functions assumes that the user address has already been veri&#64257;ed to be below PHYS_BASE. They also assume that you&#8217;ve modi&#64257;ed page_fault() so that a page fault in the kernel merely sets eax to 0xffffffff and copies its former value into eip.
<P></P>
<P><SPAN class=extract>&#25991;&#26723;&#20013;&#32473;&#20986;&#30340;&#65292;&#38024;&#23545; page_fault &#30340;&#24110;&#21161;&#20989;&#25968;&#20551;&#35774;&#19979;&#36848;&#20004;&#20010;&#21069;&#32622;&#26465;&#20214;&#24050;&#34987;&#28385;&#36275;&#65306;&#65288;1&#65289;&#29992;&#25143;&#22320;&#22336;&#24050;&#34987;&#39564;&#35777;&#20301;&#20110; PHYS_BASE &#30340;&#19979;&#26041;&#65292;&#65288;2&#65289;&#21457;&#29983;&#22312;&#20869;&#26680;&#20013;&#30340; page fault &#20165;&#23558; EAX &#35774;&#32622;&#20026; 0xffffffff &#24182;&#23558; EAX &#20043;&#21069;&#30340;&#20540;&#25335;&#36125;&#21040; EIP &#20013;</SPAN></P>
<P></P>
<P>&#24110;&#21161;&#20195;&#30721;&#20013;&#30340;&#27599;&#20010;&#29992;&#25143;&#22320;&#22336;&#37117;&#38656;&#35201;&#22312; PHYS_BASE &#30340;&#19979;&#26041;&#65292;&#23427;&#20204;&#21516;&#26102;&#20063;&#20551;&#35774; page_fault() &#20989;&#25968;&#24050;&#32463;&#34987;&#20462;&#25913;&#22240;&#27492;&#20869;&#26680;&#20013;&#30340; page fault &#20165;&#23558; eax &#35774;&#32622;&#20026; 0xffffffff &#24182;&#23558;&#21069;&#32773;&#30340;&#20540;&#22797;&#21046;&#21040; EIP &#20013;