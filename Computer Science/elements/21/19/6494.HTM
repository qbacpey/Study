<SPAN class=extract>
<P>This layout has two consequences. First, struct thread must not be allowed to grow too big. If it does, then there will not be enough room for the kernel stack. The base struct thread is only a few bytes in size. It probably should stay well under 1 kB.</P>
<P>&#22522;&#26412;&#30340;&#32447;&#31243;&#32467;&#26500;&#20307;&#22823;&#23567;&#22823;&#32422;&#20026;&#20960;&#20010; Byte&#65292;&#23427;&#22823;&#32422;&#19981;&#20250;&#36229;&#36807; 1kB</P></SPAN><SPAN class=extract>
<P>Second, kernel stacks must not be allowed to grow too large. If a stack over&#64258;ows, it will corrupt the thread state. Thus, kernel functions should not allocate large structures or arrays as non-static local variables. Use dynamic allocation with malloc() or palloc_get_page() instead. See the Memory Allocation section for more details.</P>
<P>&#27492;&#22806;&#65292;&#32447;&#31243;&#26632;&#20063;&#19981;&#33021;&#22826;&#22823;&#65292;&#21542;&#21017;&#20250;&#23545;&#32447;&#31243; TCB &#36896;&#25104;&#35206;&#30422;&#65292;&#22914;&#26524;&#30830;&#23454;&#24819;&#35201;&#20998;&#37197;&#22823;&#20869;&#23384;&#31354;&#38388;&#30340;&#35805;&#30475;&#65292;&#21487;&#20197;&#36873;&#25321;&#20351;&#29992; malloc() &#25110;&#32773; palloc_get_page() &#20989;&#25968;&#21160;&#24577;&#20998;&#37197;&#20869;&#23384;&#31354;&#38388;</P></SPAN>