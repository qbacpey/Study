</FONT><STRONG><FONT style="BACKGROUND-COLOR: #f7e394" size=5></FONT></STRONG><SPAN class=extract>
<P></P>
<P>threads/thread.c implements several public functions for thread support. Let&#8217;s take a look at the most useful ones for this project:</P>
<P>&#32447;&#31243;&#20989;&#25968;&#22823;&#22810;&#22312; threads/thread.c &#25991;&#20214;&#20013;&#36827;&#34892;&#23454;&#29616;</P></SPAN><SPAN class=extract>
<P>&#8226; Function: void thread_init (void)</P>
<P>Called by main() to initialize the thread system. Its main purpose is to create a struct thread for Pintos&#8217;s initial thread. This is possible because the Pintos loader puts the initial thread&#8217;s stack at the top of a page, in the same position as any other Pintos thread.</P>
<P>&#36825;&#20010;&#20989;&#25968;&#20250;&#34987;&nbsp;main &#20989;&#25968;&#35843;&#29992;&#65292;&#29992;&#20110;&#21021;&#22987;&#21270;&#32447;&#31243;&#31995;&#32479;&#65292;&#20854;&#20027;&#35201;&#30446;&#30340;&#26159;&#20026; Pintos &#30340;&#21021;&#22987;&#32447;&#31243;&#21019;&#24314;&#32447;&#31243;&#32467;&#26500;&#20307;</P>
<P>Before thread_init() runs, thread_current() will fail because the running thread&#8217;s magic value is incorrect. Lots of functions call thread_current() directly or indirectly, including lock_acquire() for locking a lock, so thread_init() is called early in Pintos initialization.</P>
<P>&#22312; thread_init &#36816;&#34892;&#20043;&#21069;&#37027;&#65292;thread_current &#30340;&#25191;&#34892;&#20250;&#22833;&#36133;&#65292;&#20854;&#21407;&#22240;&#26159;&#27491;&#22312;&#36816;&#34892;&#30340;&#32447;&#31243;&#30340;&#39764;&#27861;&#20540;&#24182;&#19981;&#27491;&#30830;</P>
<P>&#27492;&#22806;&#65292;&#26377;&#35768;&#22810;&#20989;&#25968;&#20250;&#30452;&#25509;&#25110;&#38388;&#25509;&#22320;&#35843;&#29992; thread_current &#20989;&#25968;&#65292;&#22240;&#27492; Pintos &#20250;&#30830;&#20445;&#23613;&#26089;&#35843;&#29992;&#36825;&#20010;&#20989;&#25968;</P>
<P></SPAN><SPAN class=extract>&nbsp;</P>
<P>&#8226; Function: struct thread *thread_current (void)</P>
<P>Returns the running thread.</P>
<P>&#36825;&#20010;&#20989;&#25968;&#20250;&#36820;&#22238;&#24403;&#21069;&#27491;&#22312;&#36816;&#34892;&#30340;&#32447;&#31243;&#30340;&#32467;&#26500;&#20307;</P></SPAN><SPAN class=extract>
<P>&#8226; Function: void thread_exit (void) NO_RETURN</P>
<P>Causes the current thread to exit. Never returns, hence NO_RETURN.</P>
<P>&#20196;&#24403;&#21069;&#32447;&#31243;&#36864;&#20986;&#65292;&#27704;&#19981;&#36820;&#22238;</P>
<P></SPAN>