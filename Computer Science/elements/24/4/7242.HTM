<SPAN class=extract>
<P>The "heap" isn't normally a real thing, especially in systems with virtual memory so each process can have their own private virtual address space. </P>
<P>Normally you have some space reserved for the stack, and everything outside that which isn't already mapped is fair game for malloc (actually its underlying<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">mmap(MAP_ANONYMOUS)</FONT></CODE><SPAN>&nbsp;</SPAN>system calls) to choose when allocating new pages. </P>
<P>&#19968;&#33324;&#26469;&#35828;&#22534;&#23454;&#38469;&#19978;&#19981;&#26159;&#20160;&#20040;&#23454;&#38469;&#23384;&#22312;&#30340;&#19996;&#35199;&#65292;&#23427;&#19968;&#33324;&#26159;&#26632;&#20013;&#23578;&#26410;&#26144;&#23556;&#30340;&#31354;&#38388;&#65292;&#25152;&#20197; malloc &#23601;&#33021;&#33258;&#30001;&#36816;&#29992;&#36825;&#20123;&#31354;&#38388;</P></SPAN><SPAN class=extract>
<P>But yes even modern glibc's<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">malloc</FONT></CODE><SPAN>&nbsp;</SPAN>on modern Linux does still use<SPAN>&nbsp;</SPAN><CODE><FONT face="Courier New">brk()</FONT></CODE><SPAN>&nbsp;</SPAN>to move the "program break" upward for small allocations, increasing the size of "the heap" the way your diagram shows.</P>
<P>&#20294;&#26159;&#29616;&#20195;&#25805;&#20316;&#31995;&#32479;&#20250;&#20351;&#29992; brk &#26469;&#23558;&#8220;program break&#8221;&#19978;&#31227;</P>
<P></SPAN>